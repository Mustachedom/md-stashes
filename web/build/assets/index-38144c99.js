var rt=Object.defineProperty;var ot=(e,t,l)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var Ee=(e,t,l)=>(ot(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function l(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=l(s);fetch(s.href,i)}})();function J(){}function ut(e,t){for(const l in t)e[l]=t[l];return e}function Ze(e){return e()}function Oe(){return Object.create(null)}function B(e){e.forEach(Ze)}function xe(e){return typeof e=="function"}function oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ct(e){return Object.keys(e).length===0}function ft(e,...t){if(e==null){for(const n of t)n(void 0);return J}const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function X(e,t,l){e.$$.on_destroy.push(ft(t,l))}function dt(e,t,l,n){if(e){const s=et(e,t,l,n);return e[0](s)}}function et(e,t,l,n){return e[1]&&n?ut(l.ctx.slice(),e[1](n(t))):l.ctx}function _t(e,t,l,n){if(e[2]&&n){const s=e[2](n(l));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],a=Math.max(t.dirty.length,s.length);for(let o=0;o<a;o+=1)i[o]=t.dirty[o]|s[o];return i}return t.dirty|s}return t.dirty}function ht(e,t,l,n,s,i){if(s){const a=et(t,l,n,i);e.p(a,s)}}function pt(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let n=0;n<l;n++)t[n]=-1;return t}return-1}function f(e,t){e.appendChild(t)}function P(e,t,l){e.insertBefore(t,l||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function Me(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function y(e){return document.createElement(e)}function E(e){return document.createTextNode(e)}function O(){return E(" ")}function ke(){return E("")}function F(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function m(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function tt(e){return e===""?null:+e}function bt(e){return Array.from(e.childNodes)}function L(e,t){t=""+t,e.data!==t&&(e.data=t)}function W(e,t){e.value=t??""}function $e(e,t,l){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function Ae(e){const t=e.querySelector(":checked");return t&&t.__value}function Ce(e,t,l){e.classList.toggle(t,!!l)}let de;function fe(e){de=e}function lt(){if(!de)throw new Error("Function called outside component initialization");return de}function mt(e){lt().$$.on_mount.push(e)}function vt(e){lt().$$.on_destroy.push(e)}const ae=[],Pe=[];let ie=[];const Ie=[],gt=Promise.resolve();let Le=!1;function yt(){Le||(Le=!0,gt.then(nt))}function _e(e){ie.push(e)}const Ve=new Set;let ne=0;function nt(){if(ne!==0)return;const e=de;do{try{for(;ne<ae.length;){const t=ae[ne];ne++,fe(t),wt(t.$$)}}catch(t){throw ae.length=0,ne=0,t}for(fe(null),ae.length=0,ne=0;Pe.length;)Pe.pop()();for(let t=0;t<ie.length;t+=1){const l=ie[t];Ve.has(l)||(Ve.add(l),l())}ie.length=0}while(ae.length);for(;Ie.length;)Ie.pop()();Le=!1,Ve.clear(),fe(e)}function wt(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function kt(e){const t=[],l=[];ie.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),ie=t}const ye=new Set;let ee;function Se(){ee={r:0,c:[],p:ee}}function Ne(){ee.r||B(ee.c),ee=ee.p}function H(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function q(e,t,l,n){if(e&&e.o){if(ye.has(e))return;ye.add(e),ee.c.push(()=>{ye.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function x(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function $t(e,t){e.d(1),t.delete(e.key)}function Ut(e,t,l,n,s,i,a,o,r,u,b,h){let v=e.length,w=i.length,_=v;const p={};for(;_--;)p[e[_].key]=_;const $=[],g=new Map,M=new Map,A=[];for(_=w;_--;){const c=h(s,i,_),d=l(c);let V=a.get(d);V?n&&A.push(()=>V.p(c,t)):(V=u(d,c),V.c()),g.set(d,$[_]=V),d in p&&M.set(d,Math.abs(_-p[d]))}const I=new Set,j=new Set;function k(c){H(c,1),c.m(o,b),a.set(c.key,c),b=c.first,w--}for(;v&&w;){const c=$[w-1],d=e[v-1],V=c.key,U=d.key;c===d?(b=c.first,v--,w--):g.has(U)?!a.has(V)||I.has(V)?k(c):j.has(U)?v--:M.get(V)>M.get(U)?(j.add(V),k(c)):(I.add(U),v--):(r(d,a),v--)}for(;v--;){const c=e[v];g.has(c.key)||r(c,a)}for(;w;)k($[w-1]);return B(A),$}function Ue(e){e&&e.c()}function he(e,t,l){const{fragment:n,after_update:s}=e.$$;n&&n.m(t,l),_e(()=>{const i=e.$$.on_mount.map(Ze).filter(xe);e.$$.on_destroy?e.$$.on_destroy.push(...i):B(i),e.$$.on_mount=[]}),s.forEach(_e)}function pe(e,t){const l=e.$$;l.fragment!==null&&(kt(l.after_update),B(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function jt(e,t){e.$$.dirty[0]===-1&&(ae.push(e),yt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function be(e,t,l,n,s,i,a,o=[-1]){const r=de;fe(e);const u=e.$$={fragment:null,ctx:[],props:i,update:J,not_equal:s,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Oe(),dirty:o,skip_bound:!1,root:t.target||r.$$.root};a&&a(u.root);let b=!1;if(u.ctx=l?l(e,t.props||{},(h,v,...w)=>{const _=w.length?w[0]:v;return u.ctx&&s(u.ctx[h],u.ctx[h]=_)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](_),b&&jt(e,h)),v}):[],u.update(),b=!0,B(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const h=bt(t.target);u.fragment&&u.fragment.l(h),h.forEach(C)}else u.fragment&&u.fragment.c();t.intro&&H(e.$$.fragment),he(e,t.target,t.anchor),nt()}fe(r)}class me{constructor(){Ee(this,"$$");Ee(this,"$$set")}$destroy(){pe(this,1),this.$destroy=J}$on(t,l){if(!xe(l))return J;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!ct(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Et);const ce=new Map,Vt=e=>{const{action:t,data:l}=e.data,n=ce.get(t);n&&n.forEach(s=>s(l))};window.addEventListener("message",Vt);function ge(e,t){const l=ce.get(e)||[];l.push(t),ce.set(e,l),vt(()=>{const n=ce.get(e)||[];ce.set(e,n.filter(s=>s!==t))})}async function D(e,t={}){const l={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},n=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${n}/${e}`,l)).json()}const se=[];function te(e,t=J){let l;const n=new Set;function s(o){if(oe(e,o)&&(e=o,l)){const r=!se.length;for(const u of n)u[1](),se.push(u,e);if(r){for(let u=0;u<se.length;u+=2)se[u][0](se[u+1]);se.length=0}}}function i(o){s(o(e))}function a(o,r=J){const u=[o,r];return n.add(u),n.size===1&&(l=t(s,i)||J),o(e),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:s,update:i,subscribe:a}}const Q=te(!1),st=te(null),je=te(null),we=te(null),Y=te(null),re=te(null),at=te(null);function Re(e,t,l){const n=e.slice();return n[8]=t[l],n}function Fe(e){let t,l,n=e[2].Ui.select.objHead+"",s,i,a,o,r,u=e[2].Ui.select.objDesc+"",b,h,v,w=x(e[3]),_=[];for(let p=0;p<w.length;p+=1)_[p]=Je(Re(e,w,p));return{c(){t=y("div"),l=y("label"),s=E(n),i=O(),a=y("div"),o=y("select"),r=y("option"),b=E(u);for(let p=0;p<_.length;p+=1)_[p].c();m(l,"for","object-option"),m(l,"class","select-label svelte-g1a6h6"),r.__value="",W(r,r.__value),r.disabled=!0,r.selected=!0,m(o,"id","object-option"),m(o,"class","select-input svelte-g1a6h6"),e[1]===void 0&&_e(()=>e[7].call(o)),m(a,"class","select-wrapper svelte-g1a6h6"),m(t,"class","select-group svelte-g1a6h6")},m(p,$){P(p,t,$),f(t,l),f(l,s),f(t,i),f(t,a),f(a,o),f(o,r),f(r,b);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(o,null);$e(o,e[1],!0),h||(v=F(o,"change",e[7]),h=!0)},p(p,$){if($&4&&n!==(n=p[2].Ui.select.objHead+"")&&L(s,n),$&4&&u!==(u=p[2].Ui.select.objDesc+"")&&L(b,u),$&8){w=x(p[3]);let g;for(g=0;g<w.length;g+=1){const M=Re(p,w,g);_[g]?_[g].p(M,$):(_[g]=Je(M),_[g].c(),_[g].m(o,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=w.length}$&10&&$e(o,p[1])},d(p){p&&C(t),Me(_,p),h=!1,v()}}}function Je(e){let t,l=e[8].label+"",n,s;return{c(){t=y("option"),n=E(l),t.__value=s=e[8].value,W(t,t.__value)},m(i,a){P(i,t,a),f(t,n)},p(i,a){a&8&&l!==(l=i[8].label+"")&&L(n,l),a&8&&s!==(s=i[8].value)&&(t.__value=s,W(t,t.__value))},d(i){i&&C(t)}}}function ze(e){let t,l,n=e[2].Ui.select.cancel+"",s,i,a,o=e[2].Ui.select.submit+"",r,u,b,h;return{c(){t=y("div"),l=y("button"),s=E(n),i=O(),a=y("button"),r=E(o),m(l,"class","btn cancel svelte-g1a6h6"),m(a,"class","btn submit svelte-g1a6h6"),a.disabled=u=e[0]==="object"&&!e[1],m(t,"class","button-group svelte-g1a6h6")},m(v,w){P(v,t,w),f(t,l),f(l,s),f(t,i),f(t,a),f(a,r),b||(h=[F(l,"click",e[5]),F(a,"click",e[4])],b=!0)},p(v,w){w&4&&n!==(n=v[2].Ui.select.cancel+"")&&L(s,n),w&4&&o!==(o=v[2].Ui.select.submit+"")&&L(r,o),w&11&&u!==(u=v[0]==="object"&&!v[1])&&(a.disabled=u)},d(v){v&&C(t),b=!1,B(h)}}}function St(e){let t,l,n,s=e[2].Ui.select.header+"",i,a,o,r,u,b=e[2].Ui.select.option1head+"",h,v,w=e[2].Ui.select.option1coords+"",_,p,$=e[2].Ui.select.option1object+"",g,M,A,I,j,k=e[0]==="object"&&Fe(e),c=e[0]&&ze(e);return{c(){t=y("div"),l=y("div"),n=y("label"),i=E(s),a=O(),o=y("div"),r=y("select"),u=y("option"),h=E(b),v=y("option"),_=E(w),p=y("option"),g=E($),M=O(),k&&k.c(),A=O(),c&&c.c(),m(n,"for","main-option"),m(n,"class","select-label svelte-g1a6h6"),u.__value="",W(u,u.__value),u.disabled=!0,u.selected=!0,v.__value="coords",W(v,v.__value),p.__value="object",W(p,p.__value),m(r,"id","main-option"),m(r,"class","select-input svelte-g1a6h6"),e[0]===void 0&&_e(()=>e[6].call(r)),m(o,"class","select-wrapper svelte-g1a6h6"),m(l,"class","select-group svelte-g1a6h6"),m(t,"class","select-container svelte-g1a6h6")},m(d,V){P(d,t,V),f(t,l),f(l,n),f(n,i),f(l,a),f(l,o),f(o,r),f(r,u),f(u,h),f(r,v),f(v,_),f(r,p),f(p,g),$e(r,e[0],!0),f(t,M),k&&k.m(t,null),f(t,A),c&&c.m(t,null),I||(j=F(r,"change",e[6]),I=!0)},p(d,[V]){V&4&&s!==(s=d[2].Ui.select.header+"")&&L(i,s),V&4&&b!==(b=d[2].Ui.select.option1head+"")&&L(h,b),V&4&&w!==(w=d[2].Ui.select.option1coords+"")&&L(_,w),V&4&&$!==($=d[2].Ui.select.option1object+"")&&L(g,$),V&1&&$e(r,d[0]),d[0]==="object"?k?k.p(d,V):(k=Fe(d),k.c(),k.m(t,A)):k&&(k.d(1),k=null),d[0]?c?c.p(d,V):(c=ze(d),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:J,o:J,d(d){d&&C(t),k&&k.d(),c&&c.d(),I=!1,j()}}}function Nt(e,t,l){let n,s;X(e,je,h=>l(2,n=h)),X(e,st,h=>l(3,s=h));let i="",a="";function o(){let h;i==="coords"?h={type:"coords",object:!1}:i==="object"&&(h={type:"object",object:a}),console.log(JSON.stringify(h)),h&&(D("submitSelection",h),we.set(!1),D("hideUI"))}function r(){l(0,i=""),l(1,a="")}function u(){i=Ae(this),l(0,i)}function b(){a=Ae(this),l(1,a)}return[i,a,n,s,o,r,u,b]}class Lt extends me{constructor(t){super(),be(this,t,Nt,St,oe,{})}}function He(e,t,l){const n=e.slice();return n[11]=t[l],n[13]=l,n}function Te(e){let t,l,n,s=e[3].Ui.edit.header+"",i,a,o,r,u,b,h=e[3].Ui.edit.del+"",v,w,_,p=e[3].Ui.edit.go2+"",$,g,M,A=e[3].Ui.edit.changeLoc+"",I,j,k,c,d=e[3].Ui.edit.edit+"",V,U,le,ue,G=x(e[1]),R=[];for(let N=0;N<G.length;N+=1)R[N]=We(He(e,G,N));return{c(){t=y("div"),l=y("div"),n=y("h2"),i=E(s),a=O(),o=y("div");for(let N=0;N<R.length;N+=1)R[N].c();r=O(),u=y("div"),b=y("button"),v=E(h),w=O(),_=y("button"),$=E(p),g=O(),M=y("button"),I=E(A),k=O(),c=y("button"),V=E(d),m(n,"class","title svelte-1179mdt"),m(l,"class","header svelte-1179mdt"),m(o,"class","object-list svelte-1179mdt"),m(b,"class","action-btn svelte-1179mdt"),m(_,"class","action-btn svelte-1179mdt"),m(M,"class","action-btn svelte-1179mdt"),M.disabled=j=e[0]<0,m(c,"class","action-btn primary svelte-1179mdt"),c.disabled=U=e[0]<0,m(u,"class","action-buttons svelte-1179mdt"),m(t,"class","menu-container svelte-1179mdt")},m(N,z){P(N,t,z),f(t,l),f(l,n),f(n,i),f(t,a),f(t,o);for(let S=0;S<R.length;S+=1)R[S]&&R[S].m(o,null);f(t,r),f(t,u),f(u,b),f(b,v),f(u,w),f(u,_),f(_,$),f(u,g),f(u,M),f(M,I),f(u,k),f(u,c),f(c,V),le||(ue=[F(b,"click",e[7]),F(_,"click",e[8]),F(M,"click",e[6]),F(c,"click",e[5])],le=!0)},p(N,z){if(z&8&&s!==(s=N[3].Ui.edit.header+"")&&L(i,s),z&27){G=x(N[1]);let S;for(S=0;S<G.length;S+=1){const ve=He(N,G,S);R[S]?R[S].p(ve,z):(R[S]=We(ve),R[S].c(),R[S].m(o,null))}for(;S<R.length;S+=1)R[S].d(1);R.length=G.length}z&8&&h!==(h=N[3].Ui.edit.del+"")&&L(v,h),z&8&&p!==(p=N[3].Ui.edit.go2+"")&&L($,p),z&8&&A!==(A=N[3].Ui.edit.changeLoc+"")&&L(I,A),z&1&&j!==(j=N[0]<0)&&(M.disabled=j),z&8&&d!==(d=N[3].Ui.edit.edit+"")&&L(V,d),z&1&&U!==(U=N[0]<0)&&(c.disabled=U)},d(N){N&&C(t),Me(R,N),le=!1,B(ue)}}}function Mt(e){let t=e[3].Ui.edit.coords+"",l;return{c(){l=E(t)},m(n,s){P(n,l,s)},p(n,s){s&8&&t!==(t=n[3].Ui.edit.coords+"")&&L(l,t)},d(n){n&&C(l)}}}function Ot(e){let t=e[3].Ui.edit.obj+"",l;return{c(){l=E(t)},m(n,s){P(n,l,s)},p(n,s){s&8&&t!==(t=n[3].Ui.edit.obj+"")&&L(l,t)},d(n){n&&C(l)}}}function We(e){let t,l,n,s=e[11].name+"",i,a,o,r=e[3].Ui.edit.id+"",u,b,h=e[11].id+"",v,w,_,p,$,g,M,A=Z(e[11].loc).x+"",I,j,k=Z(e[11].loc).y+"",c,d,V=Z(e[11].loc).z+"",U,le,ue,G,R;function N(K,T){return T&2&&(p=null),p==null&&(p=Z(K[11].data).object!==!1||Z(K[11].data).object===null),p?Ot:Mt}let z=N(e,-1),S=z(e);function ve(){return e[9](e[13])}function it(...K){return e[10](e[13],...K)}return{c(){t=y("div"),l=y("div"),n=y("span"),i=E(s),a=O(),o=y("span"),u=E(r),b=E(": "),v=E(h),w=O(),_=y("span"),S.c(),$=O(),g=y("div"),M=E("vector3("),I=E(A),j=E(", "),c=E(k),d=E(", "),U=E(V),le=E(")"),ue=O(),m(n,"class","item-name svelte-1179mdt"),m(o,"class","item-id svelte-1179mdt"),m(_,"class","item-type svelte-1179mdt"),m(l,"class","item-header svelte-1179mdt"),m(g,"class","item-location svelte-1179mdt"),m(t,"class","object-item svelte-1179mdt"),m(t,"role","button"),m(t,"tabindex","0"),Ce(t,"selected",e[0]===e[13])},m(K,T){P(K,t,T),f(t,l),f(l,n),f(n,i),f(l,a),f(l,o),f(o,u),f(o,b),f(o,v),f(l,w),f(l,_),S.m(_,null),f(t,$),f(t,g),f(g,M),f(g,I),f(g,j),f(g,c),f(g,d),f(g,U),f(g,le),f(t,ue),G||(R=[F(t,"click",ve),F(t,"keydown",it)],G=!0)},p(K,T){e=K,T&2&&s!==(s=e[11].name+"")&&L(i,s),T&8&&r!==(r=e[3].Ui.edit.id+"")&&L(u,r),T&2&&h!==(h=e[11].id+"")&&L(v,h),z===(z=N(e,T))&&S?S.p(e,T):(S.d(1),S=z(e),S&&(S.c(),S.m(_,null))),T&2&&A!==(A=Z(e[11].loc).x+"")&&L(I,A),T&2&&k!==(k=Z(e[11].loc).y+"")&&L(c,k),T&2&&V!==(V=Z(e[11].loc).z+"")&&L(U,V),T&1&&Ce(t,"selected",e[0]===e[13])},d(K){K&&C(t),S.d(),G=!1,B(R)}}}function At(e){let t,l=e[2]&&Te(e);return{c(){l&&l.c(),t=ke()},m(n,s){l&&l.m(n,s),P(n,t,s)},p(n,[s]){n[2]?l?l.p(n,s):(l=Te(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:J,o:J,d(n){n&&C(t),l&&l.d(n)}}}function Z(e){try{return e?JSON.parse(e):null}catch(t){return console.warn("Failed to parse JSON:",e,t),null}}function Ct(e,t,l){let n,s,i;X(e,re,_=>l(1,n=_)),X(e,Y,_=>l(2,s=_)),X(e,je,_=>l(3,i=_));let a=-1;function o(_){l(0,a=_)}function r(){a>=0&&(Q.set(!0),Y.set(!1),re.set(n[a]),D("editStash",n[a]))}function u(){a>=0&&(D("changeLocation",n[a]),Q.set(!1),Y.set(!1))}function b(){a>=0&&(D("deleteStash",n[a]),Q.set(!1),Y.set(!1))}function h(){a>=0&&(D("gotoLoc",n[a]),Q.set(!1),Y.set(!1))}return[a,n,s,i,o,r,u,b,h,_=>o(_),(_,p)=>(p.key==="Enter"||p.key===" ")&&o(_)]}class Pt extends me{constructor(t){super(),be(this,t,Ct,At,oe,{})}}function qe(e){let t;const l=e[4].default,n=dt(l,e,e[3],null);return{c(){n&&n.c()},m(s,i){n&&n.m(s,i),t=!0},p(s,i){n&&n.p&&(!t||i&8)&&ht(n,l,s,s[3],t?_t(l,s[3],i,null):pt(s[3]),null)},i(s){t||(H(n,s),t=!0)},o(s){q(n,s),t=!1},d(s){n&&n.d(s)}}}function Be(e){let t,l;return t=new Lt({}),{c(){Ue(t.$$.fragment)},m(n,s){he(t,n,s),l=!0},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){pe(t,n)}}}function Ge(e){let t,l;return t=new Pt({}),{c(){Ue(t.$$.fragment)},m(n,s){he(t,n,s),l=!0},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){pe(t,n)}}}function It(e){let t,l,n,s,i=e[0]&&qe(e),a=e[1]&&Be(),o=e[2]&&Ge();return{c(){t=y("main"),i&&i.c(),l=O(),a&&a.c(),n=O(),o&&o.c()},m(r,u){P(r,t,u),i&&i.m(t,null),f(t,l),a&&a.m(t,null),f(t,n),o&&o.m(t,null),s=!0},p(r,[u]){r[0]?i?(i.p(r,u),u&1&&H(i,1)):(i=qe(r),i.c(),H(i,1),i.m(t,l)):i&&(Se(),q(i,1,1,()=>{i=null}),Ne()),r[1]?a?u&2&&H(a,1):(a=Be(),a.c(),H(a,1),a.m(t,n)):a&&(Se(),q(a,1,1,()=>{a=null}),Ne()),r[2]?o?u&4&&H(o,1):(o=Ge(),o.c(),H(o,1),o.m(t,null)):o&&(Se(),q(o,1,1,()=>{o=null}),Ne())},i(r){s||(H(i),H(a),H(o),s=!0)},o(r){q(i),q(a),q(o),s=!1},d(r){r&&C(t),i&&i.d(),a&&a.d(),o&&o.d()}}}function Rt(e,t,l){let n,s;X(e,we,r=>l(1,n=r)),X(e,Y,r=>l(2,s=r));let{$$slots:i={},$$scope:a}=t,o;return Q.subscribe(r=>{l(0,o=r)}),ge("setVisible",r=>{Q.set(r)}),ge("firstMenu",()=>{we.set(!0)}),ge("editMenu",r=>{Y.set(!0),re.set(r)}),ge("setEditable",r=>{Q.set(!0)}),mt(async()=>{let r=await D("initUi");st.set(r.Config),je.set(r.lang),at.set(r.defaults);const u=b=>{["Escape"].includes(b.code)&&(D("hideUI"),Q.set(!1),we.set(!1),Y.set(!1),re.set(null))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)}),e.$$set=r=>{"$$scope"in r&&l(3,a=r.$$scope)},[o,n,s,a,i]}class Ft extends me{constructor(t){super(),be(this,t,Rt,It,oe,{})}}function Ke(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function De(e,t,l){const n=e.slice();return n[23]=t[l],n[25]=l,n}function Jt(e){let t,l,n=e[20].label+"",s,i,a;function o(b,h){return b[20].array?Wt:b[20].type==="number"?Tt:Ht}let r=o(e),u=r(e);return{c(){t=y("div"),l=y("label"),s=E(n),i=O(),u.c(),a=O(),m(l,"class","field-label svelte-21s1gx"),m(t,"class","field-container svelte-21s1gx")},m(b,h){P(b,t,h),f(t,l),f(l,s),f(t,i),u.m(t,null),f(t,a)},p(b,h){h&2&&n!==(n=b[20].label+"")&&L(s,n),r===(r=o(b))&&u?u.p(b,h):(u.d(1),u=r(b),u&&(u.c(),u.m(t,a)))},d(b){b&&C(t),u.d()}}}function zt(e){return{c:J,m:J,p:J,d:J}}function Ht(e){let t,l,n,s;function i(){e[17].call(t,e[21],e[22])}return{c(){t=y("input"),m(t,"type","text"),m(t,"placeholder",l=e[20].default||`Enter ${e[20].label.toLowerCase()}`),m(t,"class","text-input svelte-21s1gx")},m(a,o){P(a,t,o),W(t,e[20].value),n||(s=F(t,"input",i),n=!0)},p(a,o){e=a,o&2&&l!==(l=e[20].default||`Enter ${e[20].label.toLowerCase()}`)&&m(t,"placeholder",l),o&2&&t.value!==e[20].value&&W(t,e[20].value)},d(a){a&&C(t),n=!1,s()}}}function Tt(e){let t,l,n,s;function i(){e[16].call(t,e[21],e[22])}return{c(){t=y("input"),m(t,"type","number"),m(t,"placeholder",l=e[20].default),m(t,"class","number-input svelte-21s1gx"),m(t,"min","0")},m(a,o){P(a,t,o),W(t,e[20].value),n||(s=F(t,"input",i),n=!0)},p(a,o){e=a,o&2&&l!==(l=e[20].default)&&m(t,"placeholder",l),o&2&&tt(t.value)!==e[20].value&&W(t,e[20].value)},d(a){a&&C(t),n=!1,s()}}}function Wt(e){let t,l,n,s,i,a,o,r,u,b,h;function v(){e[12].call(l,e[21],e[22])}function w(...$){return e[13](e[20],...$)}function _(){return e[14](e[20])}let p=e[20].arrayValues&&e[20].arrayValues.length>0&&Qe(e);return{c(){t=y("div"),l=y("input"),s=O(),i=y("button"),a=y("span"),a.textContent="+",r=O(),p&&p.c(),u=ke(),m(l,"type","text"),m(l,"placeholder",n=e[20].default||`Add ${e[20].label.toLowerCase()}`),m(l,"class","array-input svelte-21s1gx"),m(i,"type","button"),m(i,"class","add-btn svelte-21s1gx"),i.disabled=o=!e[20].value||e[20].value.trim()==="",m(i,"title","Add item"),m(t,"class","array-input-container svelte-21s1gx")},m($,g){P($,t,g),f(t,l),W(l,e[20].value),f(t,s),f(t,i),f(i,a),P($,r,g),p&&p.m($,g),P($,u,g),b||(h=[F(l,"input",v),F(l,"keypress",w),F(i,"click",_)],b=!0)},p($,g){e=$,g&2&&n!==(n=e[20].default||`Add ${e[20].label.toLowerCase()}`)&&m(l,"placeholder",n),g&2&&l.value!==e[20].value&&W(l,e[20].value),g&2&&o!==(o=!e[20].value||e[20].value.trim()==="")&&(i.disabled=o),e[20].arrayValues&&e[20].arrayValues.length>0?p?p.p(e,g):(p=Qe(e),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},d($){$&&(C(t),C(r),C(u)),p&&p.d($),b=!1,B(h)}}}function Qe(e){let t,l=x(e[20].arrayValues),n=[];for(let s=0;s<l.length;s+=1)n[s]=Xe(De(e,l,s));return{c(){t=y("div");for(let s=0;s<n.length;s+=1)n[s].c();m(t,"class","array-values svelte-21s1gx")},m(s,i){P(s,t,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,i){if(i&34){l=x(s[20].arrayValues);let a;for(a=0;a<l.length;a+=1){const o=De(s,l,a);n[a]?n[a].p(o,i):(n[a]=Xe(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}},d(s){s&&C(t),Me(n,s)}}}function Xe(e){let t,l,n=e[23]+"",s,i,a,o,r,u;function b(){return e[15](e[20],e[25])}return{c(){t=y("div"),l=y("span"),s=E(n),i=O(),a=y("span"),a.textContent="Ã—",o=O(),m(l,"class","array-text svelte-21s1gx"),m(a,"class","delete-icon svelte-21s1gx"),m(t,"class","array-item svelte-21s1gx"),m(t,"title","Click to remove")},m(h,v){P(h,t,v),f(t,l),f(l,s),f(t,i),f(t,a),f(t,o),r||(u=F(t,"click",b),r=!0)},p(h,v){e=h,v&2&&n!==(n=e[23]+"")&&L(s,n)},d(h){h&&C(t),r=!1,u()}}}function Ye(e,t){let l,n,s;function i(r,u){var b,h,v,w,_,p;return u&2&&(n=null),n==null&&(n=r[20].handle==="jobRank"&&(!((b=r[9]())!=null&&b.arrayValues)||((v=(h=r[9]())==null?void 0:h.arrayValues)==null?void 0:v.length)===0)||r[20].handle==="gangRank"&&(!((w=r[10]())!=null&&w.arrayValues)||((p=(_=r[10]())==null?void 0:_.arrayValues)==null?void 0:p.length)===0)),n?zt:Jt}let a=i(t,-1),o=a(t);return{key:e,first:null,c(){l=ke(),o.c(),s=ke(),this.first=l},m(r,u){P(r,l,u),o.m(r,u),P(r,s,u)},p(r,u){t=r,a===(a=i(t,u))&&o?o.p(t,u):(o.d(1),o=a(t),o&&(o.c(),o.m(s.parentNode,s)))},d(r){r&&(C(l),C(s)),o.d(r)}}}function qt(e){let t,l,n,s,i,a=[],o=new Map,r,u,b,h=e[2].Ui.create.reset+"",v,w,_,p=e[2].Ui.create.submit+"",$,g,M,A=x(e[1]);const I=j=>j[20].handle;for(let j=0;j<A.length;j+=1){let k=Ke(e,A,j),c=I(k);o.set(c,a[j]=Ye(c,k))}return{c(){t=y("div"),l=y("div"),n=y("h1"),n.textContent=`${e[3]}`,s=O(),i=y("div");for(let j=0;j<a.length;j+=1)a[j].c();r=O(),u=y("div"),b=y("button"),v=E(h),w=O(),_=y("button"),$=E(p),m(n,"class","svelte-21s1gx"),m(l,"class","header svelte-21s1gx"),m(i,"class","form-content svelte-21s1gx"),m(b,"type","button"),m(b,"class","reset-btn svelte-21s1gx"),b.disabled=e[0],m(_,"type","button"),m(_,"class","submit-btn svelte-21s1gx"),_.disabled=e[0],m(u,"class","button-container svelte-21s1gx"),m(t,"class","container svelte-21s1gx")},m(j,k){P(j,t,k),f(t,l),f(l,n),f(t,s),f(t,i);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(i,null);f(t,r),f(t,u),f(u,b),f(b,v),f(u,w),f(u,_),f(_,$),g||(M=[F(b,"click",e[8]),F(_,"click",e[7])],g=!0)},p(j,[k]){k&1650&&(A=x(j[1]),a=Ut(a,k,I,1,j,A,o,i,$t,Ye,null,Ke)),k&4&&h!==(h=j[2].Ui.create.reset+"")&&L(v,h),k&1&&(b.disabled=j[0]),k&4&&p!==(p=j[2].Ui.create.submit+"")&&L($,p),k&1&&(_.disabled=j[0])},i:J,o:J,d(j){j&&C(t);for(let k=0;k<a.length;k+=1)a[k].d();g=!1,B(M)}}}function Bt(e,t,l){let n,s,i;X(e,re,c=>l(11,n=c)),X(e,je,c=>l(2,s=c)),X(e,at,c=>l(18,i=c));let a=s.Ui.create.header,o=!1,r=[{handle:"name",label:s.Ui.create.name,array:!1,default:"my_stash",value:""},{handle:"job",label:s.Ui.create.job,array:!0,default:!1,value:"",arrayValues:[]},{handle:"jobRank",label:s.Ui.create.jobRank,array:!1,type:"number",default:0,value:""},{handle:"gang",label:s.Ui.create.gang,array:!0,default:!1,value:"",arrayValues:[]},{handle:"gangRank",label:s.Ui.create.gangRank,array:!1,type:"number",default:0,value:""},{handle:"item",label:s.Ui.create.item,array:!0,default:!1,value:"",arrayValues:[]},{handle:"identifier",label:s.Ui.create.identifier,array:!0,default:!1,value:"",arrayValues:[]},{handle:"maxWeight",label:s.Ui.create.weight,array:!1,type:"number",default:i.maxWeight,value:""},{handle:"slots",label:s.Ui.create.slots,array:!1,type:"number",default:i.slots,value:""},{handle:"password",label:s.Ui.create.password,array:!1,default:!1,value:""}];function u(c){c.value&&c.value.trim()!==""&&(c.arrayValues||(c.arrayValues=[]),c.arrayValues.push(c.value.trim()),c.value="",l(1,r=[...r]))}function b(c,d){c.arrayValues&&(c.arrayValues.splice(d,1),l(1,r=[...r]))}function h(c,d){c.key==="Enter"&&u(d)}async function v(){l(0,o=!0);const c={};r.forEach(d=>{d.array?!d.arrayValues||d.arrayValues.length===0?c[d.handle]=!1:c[d.handle]=d.arrayValues:d.type==="number"?c[d.handle]=d.value?Number(d.value):Number(d.default):c[d.handle]=d.value||d.default}),n?(await D("saveEdit",{form:c,id:n}),w(),Y.set(!1),Q.set(!1),re.set(null)):await D("createStash",c),Q.set(!1),l(0,o=!1)}function w(){r.forEach(c=>{c.value="",c.arrayValues=[]}),l(1,r=[...r])}function _(){return r.find(c=>c.handle==="job")}function p(){return r.find(c=>c.handle==="gang")}function $(c){try{const d=typeof c.data=="string"?JSON.parse(c.data):c.data||{},V=typeof c.loc=="string"?JSON.parse(c.loc):c.loc||{};r.forEach(U=>{if(U.handle==="name"){U.value=c.name||U.default;return}if(U.handle==="maxWeight"&&d.weight!==void 0){U.value=d.weight;return}if(U.handle==="slots"&&d.slots!==void 0){U.value=d.slots;return}if(U.handle==="password"){U.value=d.password===!1?"":d.password;return}if(U.array&&d[U.handle]!==void 0){Array.isArray(d[U.handle])?U.arrayValues=[...d[U.handle]]:d[U.handle]===!1&&(U.arrayValues=[]);return}if(!U.array&&d[U.handle]!==void 0){U.value=d[U.handle];return}U.value=U.default,U.array&&(U.arrayValues=[])}),l(1,r=[...r])}catch(d){console.error("Failed to parse editable data:",d)}}function g(c,d){c[d].value=this.value,l(1,r)}const M=(c,d)=>h(d,c),A=c=>u(c),I=(c,d)=>b(c,d);function j(c,d){c[d].value=tt(this.value),l(1,r)}function k(c,d){c[d].value=this.value,l(1,r)}return e.$$.update=()=>{e.$$.dirty&2048&&n&&$(n)},[o,r,s,a,u,b,h,v,w,_,p,n,g,M,A,I,j,k]}class Gt extends me{constructor(t){super(),be(this,t,Bt,qt,oe,{})}}const Kt=()=>!window.invokeNative,Dt=(e,t=1e3)=>{if(Kt())for(const l of e)setTimeout(()=>{window.dispatchEvent(new MessageEvent("message",{data:{action:l.action,data:l.data}}))},t)};function Qt(e){let t,l;return t=new Gt({}),{c(){Ue(t.$$.fragment)},m(n,s){he(t,n,s),l=!0},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){pe(t,n)}}}function Xt(e){let t,l,n;return l=new Ft({props:{$$slots:{default:[Qt]},$$scope:{ctx:e}}}),{c(){t=y("main"),Ue(l.$$.fragment)},m(s,i){P(s,t,i),he(l,t,null),n=!0},p(s,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:s}),l.$set(a)},i(s){n||(H(l.$$.fragment,s),n=!0)},o(s){q(l.$$.fragment,s),n=!1},d(s){s&&C(t),pe(l)}}}function Yt(e){return Dt([{action:"setVisible",data:!0}]),[]}class Zt extends me{constructor(t){super(),be(this,t,Yt,Xt,oe,{})}}new Zt({target:document.getElementById("app")});
