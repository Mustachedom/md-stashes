var rt=Object.defineProperty;var ot=(e,t,l)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var Ee=(e,t,l)=>(ot(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=l(s);fetch(s.href,a)}})();function J(){}function ut(e,t){for(const l in t)e[l]=t[l];return e}function Ze(e){return e()}function Oe(){return Object.create(null)}function B(e){e.forEach(Ze)}function xe(e){return typeof e=="function"}function oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ft(e){return Object.keys(e).length===0}function ct(e,...t){if(e==null){for(const n of t)n(void 0);return J}const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function X(e,t,l){e.$$.on_destroy.push(ct(t,l))}function dt(e,t,l,n){if(e){const s=et(e,t,l,n);return e[0](s)}}function et(e,t,l,n){return e[1]&&n?ut(l.ctx.slice(),e[1](n(t))):l.ctx}function _t(e,t,l,n){if(e[2]&&n){const s=e[2](n(l));if(t.dirty===void 0)return s;if(typeof s=="object"){const a=[],i=Math.max(t.dirty.length,s.length);for(let o=0;o<i;o+=1)a[o]=t.dirty[o]|s[o];return a}return t.dirty|s}return t.dirty}function ht(e,t,l,n,s,a){if(s){const i=et(t,l,n,a);e.p(i,s)}}function pt(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let n=0;n<l;n++)t[n]=-1;return t}return-1}function c(e,t){e.appendChild(t)}function P(e,t,l){e.insertBefore(t,l||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function Me(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function y(e){return document.createElement(e)}function E(e){return document.createTextNode(e)}function O(){return E(" ")}function we(){return E("")}function F(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function v(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function tt(e){return e===""?null:+e}function bt(e){return Array.from(e.childNodes)}function L(e,t){t=""+t,e.data!==t&&(e.data=t)}function W(e,t){e.value=t??""}function $e(e,t,l){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function Ae(e){const t=e.querySelector(":checked");return t&&t.__value}function Ce(e,t,l){e.classList.toggle(t,!!l)}let de;function ce(e){de=e}function lt(){if(!de)throw new Error("Function called outside component initialization");return de}function vt(e){lt().$$.on_mount.push(e)}function mt(e){lt().$$.on_destroy.push(e)}const ie=[],Pe=[];let ae=[];const Ie=[],gt=Promise.resolve();let Le=!1;function yt(){Le||(Le=!0,gt.then(nt))}function _e(e){ae.push(e)}const Ve=new Set;let ne=0;function nt(){if(ne!==0)return;const e=de;do{try{for(;ne<ie.length;){const t=ie[ne];ne++,ce(t),kt(t.$$)}}catch(t){throw ie.length=0,ne=0,t}for(ce(null),ie.length=0,ne=0;Pe.length;)Pe.pop()();for(let t=0;t<ae.length;t+=1){const l=ae[t];Ve.has(l)||(Ve.add(l),l())}ae.length=0}while(ie.length);for(;Ie.length;)Ie.pop()();Le=!1,Ve.clear(),ce(e)}function kt(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function wt(e){const t=[],l=[];ae.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),ae=t}const ye=new Set;let ee;function Se(){ee={r:0,c:[],p:ee}}function Ne(){ee.r||B(ee.c),ee=ee.p}function H(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function q(e,t,l,n){if(e&&e.o){if(ye.has(e))return;ye.add(e),ee.c.push(()=>{ye.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function x(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function $t(e,t){e.d(1),t.delete(e.key)}function Ut(e,t,l,n,s,a,i,o,r,u,b,h){let m=e.length,k=a.length,_=m;const p={};for(;_--;)p[e[_].key]=_;const $=[],g=new Map,M=new Map,A=[];for(_=k;_--;){const f=h(s,a,_),d=l(f);let V=i.get(d);V?n&&A.push(()=>V.p(f,t)):(V=u(d,f),V.c()),g.set(d,$[_]=V),d in p&&M.set(d,Math.abs(_-p[d]))}const I=new Set,j=new Set;function w(f){H(f,1),f.m(o,b),i.set(f.key,f),b=f.first,k--}for(;m&&k;){const f=$[k-1],d=e[m-1],V=f.key,U=d.key;f===d?(b=f.first,m--,k--):g.has(U)?!i.has(V)||I.has(V)?w(f):j.has(U)?m--:M.get(V)>M.get(U)?(j.add(V),w(f)):(I.add(U),m--):(r(d,i),m--)}for(;m--;){const f=e[m];g.has(f.key)||r(f,i)}for(;k;)w($[k-1]);return B(A),$}function Ue(e){e&&e.c()}function he(e,t,l){const{fragment:n,after_update:s}=e.$$;n&&n.m(t,l),_e(()=>{const a=e.$$.on_mount.map(Ze).filter(xe);e.$$.on_destroy?e.$$.on_destroy.push(...a):B(a),e.$$.on_mount=[]}),s.forEach(_e)}function pe(e,t){const l=e.$$;l.fragment!==null&&(wt(l.after_update),B(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function jt(e,t){e.$$.dirty[0]===-1&&(ie.push(e),yt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function be(e,t,l,n,s,a,i,o=[-1]){const r=de;ce(e);const u=e.$$={fragment:null,ctx:[],props:a,update:J,not_equal:s,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Oe(),dirty:o,skip_bound:!1,root:t.target||r.$$.root};i&&i(u.root);let b=!1;if(u.ctx=l?l(e,t.props||{},(h,m,...k)=>{const _=k.length?k[0]:m;return u.ctx&&s(u.ctx[h],u.ctx[h]=_)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](_),b&&jt(e,h)),m}):[],u.update(),b=!0,B(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const h=bt(t.target);u.fragment&&u.fragment.l(h),h.forEach(C)}else u.fragment&&u.fragment.c();t.intro&&H(e.$$.fragment),he(e,t.target,t.anchor),nt()}ce(r)}class ve{constructor(){Ee(this,"$$");Ee(this,"$$set")}$destroy(){pe(this,1),this.$destroy=J}$on(t,l){if(!xe(l))return J;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!ft(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Et);const fe=new Map,Vt=e=>{const{action:t,data:l}=e.data,n=fe.get(t);n&&n.forEach(s=>s(l))};window.addEventListener("message",Vt);function ge(e,t){const l=fe.get(e)||[];l.push(t),fe.set(e,l),mt(()=>{const n=fe.get(e)||[];fe.set(e,n.filter(s=>s!==t))})}async function D(e,t={}){const l={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},n=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${n}/${e}`,l)).json()}const se=[];function te(e,t=J){let l;const n=new Set;function s(o){if(oe(e,o)&&(e=o,l)){const r=!se.length;for(const u of n)u[1](),se.push(u,e);if(r){for(let u=0;u<se.length;u+=2)se[u][0](se[u+1]);se.length=0}}}function a(o){s(o(e))}function i(o,r=J){const u=[o,r];return n.add(u),n.size===1&&(l=t(s,a)||J),o(e),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:s,update:a,subscribe:i}}const Q=te(!1),st=te(null),je=te(null),ke=te(null),Y=te(null),re=te(null),it=te(null);function Re(e,t,l){const n=e.slice();return n[8]=t[l],n}function Fe(e){let t,l,n=e[2].Ui.select.objHead+"",s,a,i,o,r,u=e[2].Ui.select.objDesc+"",b,h,m,k=x(e[3]),_=[];for(let p=0;p<k.length;p+=1)_[p]=Je(Re(e,k,p));return{c(){t=y("div"),l=y("label"),s=E(n),a=O(),i=y("div"),o=y("select"),r=y("option"),b=E(u);for(let p=0;p<_.length;p+=1)_[p].c();v(l,"for","object-option"),v(l,"class","select-label svelte-l4hiaf"),r.__value="",W(r,r.__value),r.disabled=!0,r.selected=!0,v(o,"id","object-option"),v(o,"class","select-input svelte-l4hiaf"),e[1]===void 0&&_e(()=>e[7].call(o)),v(i,"class","select-wrapper svelte-l4hiaf"),v(t,"class","select-group svelte-l4hiaf")},m(p,$){P(p,t,$),c(t,l),c(l,s),c(t,a),c(t,i),c(i,o),c(o,r),c(r,b);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(o,null);$e(o,e[1],!0),h||(m=F(o,"change",e[7]),h=!0)},p(p,$){if($&4&&n!==(n=p[2].Ui.select.objHead+"")&&L(s,n),$&4&&u!==(u=p[2].Ui.select.objDesc+"")&&L(b,u),$&8){k=x(p[3]);let g;for(g=0;g<k.length;g+=1){const M=Re(p,k,g);_[g]?_[g].p(M,$):(_[g]=Je(M),_[g].c(),_[g].m(o,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=k.length}$&10&&$e(o,p[1])},d(p){p&&C(t),Me(_,p),h=!1,m()}}}function Je(e){let t,l=e[8].label+"",n,s;return{c(){t=y("option"),n=E(l),t.__value=s=e[8].value,W(t,t.__value)},m(a,i){P(a,t,i),c(t,n)},p(a,i){i&8&&l!==(l=a[8].label+"")&&L(n,l),i&8&&s!==(s=a[8].value)&&(t.__value=s,W(t,t.__value))},d(a){a&&C(t)}}}function ze(e){let t,l,n=e[2].Ui.select.cancel+"",s,a,i,o=e[2].Ui.select.submit+"",r,u,b,h;return{c(){t=y("div"),l=y("button"),s=E(n),a=O(),i=y("button"),r=E(o),v(l,"class","btn cancel svelte-l4hiaf"),v(i,"class","btn submit svelte-l4hiaf"),i.disabled=u=e[0]==="object"&&!e[1],v(t,"class","button-group svelte-l4hiaf")},m(m,k){P(m,t,k),c(t,l),c(l,s),c(t,a),c(t,i),c(i,r),b||(h=[F(l,"click",e[5]),F(i,"click",e[4])],b=!0)},p(m,k){k&4&&n!==(n=m[2].Ui.select.cancel+"")&&L(s,n),k&4&&o!==(o=m[2].Ui.select.submit+"")&&L(r,o),k&11&&u!==(u=m[0]==="object"&&!m[1])&&(i.disabled=u)},d(m){m&&C(t),b=!1,B(h)}}}function St(e){let t,l,n,s=e[2].Ui.select.header+"",a,i,o,r,u,b=e[2].Ui.select.option1head+"",h,m,k=e[2].Ui.select.option1coords+"",_,p,$=e[2].Ui.select.option1object+"",g,M,A,I,j,w=e[0]==="object"&&Fe(e),f=e[0]&&ze(e);return{c(){t=y("div"),l=y("div"),n=y("label"),a=E(s),i=O(),o=y("div"),r=y("select"),u=y("option"),h=E(b),m=y("option"),_=E(k),p=y("option"),g=E($),M=O(),w&&w.c(),A=O(),f&&f.c(),v(n,"for","main-option"),v(n,"class","select-label svelte-l4hiaf"),u.__value="",W(u,u.__value),u.disabled=!0,u.selected=!0,m.__value="coords",W(m,m.__value),p.__value="object",W(p,p.__value),v(r,"id","main-option"),v(r,"class","select-input svelte-l4hiaf"),e[0]===void 0&&_e(()=>e[6].call(r)),v(o,"class","select-wrapper svelte-l4hiaf"),v(l,"class","select-group svelte-l4hiaf"),v(t,"class","select-container svelte-l4hiaf")},m(d,V){P(d,t,V),c(t,l),c(l,n),c(n,a),c(l,i),c(l,o),c(o,r),c(r,u),c(u,h),c(r,m),c(m,_),c(r,p),c(p,g),$e(r,e[0],!0),c(t,M),w&&w.m(t,null),c(t,A),f&&f.m(t,null),I||(j=F(r,"change",e[6]),I=!0)},p(d,[V]){V&4&&s!==(s=d[2].Ui.select.header+"")&&L(a,s),V&4&&b!==(b=d[2].Ui.select.option1head+"")&&L(h,b),V&4&&k!==(k=d[2].Ui.select.option1coords+"")&&L(_,k),V&4&&$!==($=d[2].Ui.select.option1object+"")&&L(g,$),V&1&&$e(r,d[0]),d[0]==="object"?w?w.p(d,V):(w=Fe(d),w.c(),w.m(t,A)):w&&(w.d(1),w=null),d[0]?f?f.p(d,V):(f=ze(d),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i:J,o:J,d(d){d&&C(t),w&&w.d(),f&&f.d(),I=!1,j()}}}function Nt(e,t,l){let n,s;X(e,je,h=>l(2,n=h)),X(e,st,h=>l(3,s=h));let a="",i="";function o(){let h;a==="coords"?h={type:"coords",object:!1}:a==="object"&&(h={type:"object",object:i}),console.log(JSON.stringify(h)),h&&(D("submitSelection",h),ke.set(!1),D("hideUI"))}function r(){l(0,a=""),l(1,i="")}function u(){a=Ae(this),l(0,a)}function b(){i=Ae(this),l(1,i)}return[a,i,n,s,o,r,u,b]}class Lt extends ve{constructor(t){super(),be(this,t,Nt,St,oe,{})}}function He(e,t,l){const n=e.slice();return n[11]=t[l],n[13]=l,n}function Te(e){let t,l,n,s=e[3].Ui.edit.header+"",a,i,o,r,u,b,h=e[3].Ui.edit.del+"",m,k,_,p=e[3].Ui.edit.go2+"",$,g,M,A=e[3].Ui.edit.changeLoc+"",I,j,w,f,d=e[3].Ui.edit.edit+"",V,U,le,ue,G=x(e[1]),R=[];for(let N=0;N<G.length;N+=1)R[N]=We(He(e,G,N));return{c(){t=y("div"),l=y("div"),n=y("h2"),a=E(s),i=O(),o=y("div");for(let N=0;N<R.length;N+=1)R[N].c();r=O(),u=y("div"),b=y("button"),m=E(h),k=O(),_=y("button"),$=E(p),g=O(),M=y("button"),I=E(A),w=O(),f=y("button"),V=E(d),v(n,"class","title svelte-19rr41k"),v(l,"class","header svelte-19rr41k"),v(o,"class","object-list svelte-19rr41k"),v(b,"class","action-btn svelte-19rr41k"),v(_,"class","action-btn svelte-19rr41k"),v(M,"class","action-btn svelte-19rr41k"),M.disabled=j=e[0]<0,v(f,"class","action-btn primary svelte-19rr41k"),f.disabled=U=e[0]<0,v(u,"class","action-buttons svelte-19rr41k"),v(t,"class","menu-container svelte-19rr41k")},m(N,z){P(N,t,z),c(t,l),c(l,n),c(n,a),c(t,i),c(t,o);for(let S=0;S<R.length;S+=1)R[S]&&R[S].m(o,null);c(t,r),c(t,u),c(u,b),c(b,m),c(u,k),c(u,_),c(_,$),c(u,g),c(u,M),c(M,I),c(u,w),c(u,f),c(f,V),le||(ue=[F(b,"click",e[7]),F(_,"click",e[8]),F(M,"click",e[6]),F(f,"click",e[5])],le=!0)},p(N,z){if(z&8&&s!==(s=N[3].Ui.edit.header+"")&&L(a,s),z&27){G=x(N[1]);let S;for(S=0;S<G.length;S+=1){const me=He(N,G,S);R[S]?R[S].p(me,z):(R[S]=We(me),R[S].c(),R[S].m(o,null))}for(;S<R.length;S+=1)R[S].d(1);R.length=G.length}z&8&&h!==(h=N[3].Ui.edit.del+"")&&L(m,h),z&8&&p!==(p=N[3].Ui.edit.go2+"")&&L($,p),z&8&&A!==(A=N[3].Ui.edit.changeLoc+"")&&L(I,A),z&1&&j!==(j=N[0]<0)&&(M.disabled=j),z&8&&d!==(d=N[3].Ui.edit.edit+"")&&L(V,d),z&1&&U!==(U=N[0]<0)&&(f.disabled=U)},d(N){N&&C(t),Me(R,N),le=!1,B(ue)}}}function Mt(e){let t=e[3].Ui.edit.coords+"",l;return{c(){l=E(t)},m(n,s){P(n,l,s)},p(n,s){s&8&&t!==(t=n[3].Ui.edit.coords+"")&&L(l,t)},d(n){n&&C(l)}}}function Ot(e){let t=e[3].Ui.edit.obj+"",l;return{c(){l=E(t)},m(n,s){P(n,l,s)},p(n,s){s&8&&t!==(t=n[3].Ui.edit.obj+"")&&L(l,t)},d(n){n&&C(l)}}}function We(e){let t,l,n,s=e[11].name+"",a,i,o,r=e[3].Ui.edit.id+"",u,b,h=e[11].id+"",m,k,_,p,$,g,M,A=Z(e[11].loc).x+"",I,j,w=Z(e[11].loc).y+"",f,d,V=Z(e[11].loc).z+"",U,le,ue,G,R;function N(K,T){return T&2&&(p=null),p==null&&(p=Z(K[11].data).object!==!1||Z(K[11].data).object===null),p?Ot:Mt}let z=N(e,-1),S=z(e);function me(){return e[9](e[13])}function at(...K){return e[10](e[13],...K)}return{c(){t=y("div"),l=y("div"),n=y("span"),a=E(s),i=O(),o=y("span"),u=E(r),b=E(": "),m=E(h),k=O(),_=y("span"),S.c(),$=O(),g=y("div"),M=E("vector3("),I=E(A),j=E(", "),f=E(w),d=E(", "),U=E(V),le=E(")"),ue=O(),v(n,"class","item-name svelte-19rr41k"),v(o,"class","item-id svelte-19rr41k"),v(_,"class","item-type svelte-19rr41k"),v(l,"class","item-header svelte-19rr41k"),v(g,"class","item-location svelte-19rr41k"),v(t,"class","object-item svelte-19rr41k"),v(t,"role","button"),v(t,"tabindex","0"),Ce(t,"selected",e[0]===e[13])},m(K,T){P(K,t,T),c(t,l),c(l,n),c(n,a),c(l,i),c(l,o),c(o,u),c(o,b),c(o,m),c(l,k),c(l,_),S.m(_,null),c(t,$),c(t,g),c(g,M),c(g,I),c(g,j),c(g,f),c(g,d),c(g,U),c(g,le),c(t,ue),G||(R=[F(t,"click",me),F(t,"keydown",at)],G=!0)},p(K,T){e=K,T&2&&s!==(s=e[11].name+"")&&L(a,s),T&8&&r!==(r=e[3].Ui.edit.id+"")&&L(u,r),T&2&&h!==(h=e[11].id+"")&&L(m,h),z===(z=N(e,T))&&S?S.p(e,T):(S.d(1),S=z(e),S&&(S.c(),S.m(_,null))),T&2&&A!==(A=Z(e[11].loc).x+"")&&L(I,A),T&2&&w!==(w=Z(e[11].loc).y+"")&&L(f,w),T&2&&V!==(V=Z(e[11].loc).z+"")&&L(U,V),T&1&&Ce(t,"selected",e[0]===e[13])},d(K){K&&C(t),S.d(),G=!1,B(R)}}}function At(e){let t,l=e[2]&&Te(e);return{c(){l&&l.c(),t=we()},m(n,s){l&&l.m(n,s),P(n,t,s)},p(n,[s]){n[2]?l?l.p(n,s):(l=Te(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:J,o:J,d(n){n&&C(t),l&&l.d(n)}}}function Z(e){try{return e?JSON.parse(e):null}catch(t){return console.warn("Failed to parse JSON:",e,t),null}}function Ct(e,t,l){let n,s,a;X(e,re,_=>l(1,n=_)),X(e,Y,_=>l(2,s=_)),X(e,je,_=>l(3,a=_));let i=-1;function o(_){l(0,i=_)}function r(){i>=0&&(Q.set(!0),Y.set(!1),re.set(n[i]),D("editStash",n[i]))}function u(){i>=0&&(D("changeLocation",n[i]),Q.set(!1),Y.set(!1))}function b(){i>=0&&(D("deleteStash",n[i]),Q.set(!1),Y.set(!1))}function h(){i>=0&&(D("gotoLoc",n[i]),Q.set(!1),Y.set(!1))}return[i,n,s,a,o,r,u,b,h,_=>o(_),(_,p)=>(p.key==="Enter"||p.key===" ")&&o(_)]}class Pt extends ve{constructor(t){super(),be(this,t,Ct,At,oe,{})}}function qe(e){let t;const l=e[4].default,n=dt(l,e,e[3],null);return{c(){n&&n.c()},m(s,a){n&&n.m(s,a),t=!0},p(s,a){n&&n.p&&(!t||a&8)&&ht(n,l,s,s[3],t?_t(l,s[3],a,null):pt(s[3]),null)},i(s){t||(H(n,s),t=!0)},o(s){q(n,s),t=!1},d(s){n&&n.d(s)}}}function Be(e){let t,l;return t=new Lt({}),{c(){Ue(t.$$.fragment)},m(n,s){he(t,n,s),l=!0},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){pe(t,n)}}}function Ge(e){let t,l;return t=new Pt({}),{c(){Ue(t.$$.fragment)},m(n,s){he(t,n,s),l=!0},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){pe(t,n)}}}function It(e){let t,l,n,s,a=e[0]&&qe(e),i=e[1]&&Be(),o=e[2]&&Ge();return{c(){t=y("main"),a&&a.c(),l=O(),i&&i.c(),n=O(),o&&o.c()},m(r,u){P(r,t,u),a&&a.m(t,null),c(t,l),i&&i.m(t,null),c(t,n),o&&o.m(t,null),s=!0},p(r,[u]){r[0]?a?(a.p(r,u),u&1&&H(a,1)):(a=qe(r),a.c(),H(a,1),a.m(t,l)):a&&(Se(),q(a,1,1,()=>{a=null}),Ne()),r[1]?i?u&2&&H(i,1):(i=Be(),i.c(),H(i,1),i.m(t,n)):i&&(Se(),q(i,1,1,()=>{i=null}),Ne()),r[2]?o?u&4&&H(o,1):(o=Ge(),o.c(),H(o,1),o.m(t,null)):o&&(Se(),q(o,1,1,()=>{o=null}),Ne())},i(r){s||(H(a),H(i),H(o),s=!0)},o(r){q(a),q(i),q(o),s=!1},d(r){r&&C(t),a&&a.d(),i&&i.d(),o&&o.d()}}}function Rt(e,t,l){let n,s;X(e,ke,r=>l(1,n=r)),X(e,Y,r=>l(2,s=r));let{$$slots:a={},$$scope:i}=t,o;return Q.subscribe(r=>{l(0,o=r)}),ge("setVisible",r=>{Q.set(r)}),ge("firstMenu",()=>{ke.set(!0)}),ge("editMenu",r=>{Y.set(!0),re.set(r)}),ge("setEditable",r=>{Q.set(!0)}),vt(async()=>{let r=await D("initUi");st.set(r.Config),je.set(r.lang),it.set(r.defaults);const u=b=>{["Escape"].includes(b.code)&&(D("hideUI"),Q.set(!1),ke.set(!1),Y.set(!1),re.set(null))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)}),e.$$set=r=>{"$$scope"in r&&l(3,i=r.$$scope)},[o,n,s,i,a]}class Ft extends ve{constructor(t){super(),be(this,t,Rt,It,oe,{})}}function Ke(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function De(e,t,l){const n=e.slice();return n[23]=t[l],n[25]=l,n}function Jt(e){let t,l,n=e[20].label+"",s,a,i;function o(b,h){return b[20].array?Wt:b[20].type==="number"?Tt:Ht}let r=o(e),u=r(e);return{c(){t=y("div"),l=y("label"),s=E(n),a=O(),u.c(),i=O(),v(l,"class","field-label svelte-21s1gx"),v(t,"class","field-container svelte-21s1gx")},m(b,h){P(b,t,h),c(t,l),c(l,s),c(t,a),u.m(t,null),c(t,i)},p(b,h){h&2&&n!==(n=b[20].label+"")&&L(s,n),r===(r=o(b))&&u?u.p(b,h):(u.d(1),u=r(b),u&&(u.c(),u.m(t,i)))},d(b){b&&C(t),u.d()}}}function zt(e){return{c:J,m:J,p:J,d:J}}function Ht(e){let t,l,n,s;function a(){e[17].call(t,e[21],e[22])}return{c(){t=y("input"),v(t,"type","text"),v(t,"placeholder",l=e[20].default||`Enter ${e[20].label.toLowerCase()}`),v(t,"class","text-input svelte-21s1gx")},m(i,o){P(i,t,o),W(t,e[20].value),n||(s=F(t,"input",a),n=!0)},p(i,o){e=i,o&2&&l!==(l=e[20].default||`Enter ${e[20].label.toLowerCase()}`)&&v(t,"placeholder",l),o&2&&t.value!==e[20].value&&W(t,e[20].value)},d(i){i&&C(t),n=!1,s()}}}function Tt(e){let t,l,n,s;function a(){e[16].call(t,e[21],e[22])}return{c(){t=y("input"),v(t,"type","number"),v(t,"placeholder",l=e[20].default),v(t,"class","number-input svelte-21s1gx"),v(t,"min","0")},m(i,o){P(i,t,o),W(t,e[20].value),n||(s=F(t,"input",a),n=!0)},p(i,o){e=i,o&2&&l!==(l=e[20].default)&&v(t,"placeholder",l),o&2&&tt(t.value)!==e[20].value&&W(t,e[20].value)},d(i){i&&C(t),n=!1,s()}}}function Wt(e){let t,l,n,s,a,i,o,r,u,b,h;function m(){e[12].call(l,e[21],e[22])}function k(...$){return e[13](e[20],...$)}function _(){return e[14](e[20])}let p=e[20].arrayValues&&e[20].arrayValues.length>0&&Qe(e);return{c(){t=y("div"),l=y("input"),s=O(),a=y("button"),i=y("span"),i.textContent="+",r=O(),p&&p.c(),u=we(),v(l,"type","text"),v(l,"placeholder",n=e[20].default||`Add ${e[20].label.toLowerCase()}`),v(l,"class","array-input svelte-21s1gx"),v(a,"type","button"),v(a,"class","add-btn svelte-21s1gx"),a.disabled=o=!e[20].value||e[20].value.trim()==="",v(a,"title","Add item"),v(t,"class","array-input-container svelte-21s1gx")},m($,g){P($,t,g),c(t,l),W(l,e[20].value),c(t,s),c(t,a),c(a,i),P($,r,g),p&&p.m($,g),P($,u,g),b||(h=[F(l,"input",m),F(l,"keypress",k),F(a,"click",_)],b=!0)},p($,g){e=$,g&2&&n!==(n=e[20].default||`Add ${e[20].label.toLowerCase()}`)&&v(l,"placeholder",n),g&2&&l.value!==e[20].value&&W(l,e[20].value),g&2&&o!==(o=!e[20].value||e[20].value.trim()==="")&&(a.disabled=o),e[20].arrayValues&&e[20].arrayValues.length>0?p?p.p(e,g):(p=Qe(e),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},d($){$&&(C(t),C(r),C(u)),p&&p.d($),b=!1,B(h)}}}function Qe(e){let t,l=x(e[20].arrayValues),n=[];for(let s=0;s<l.length;s+=1)n[s]=Xe(De(e,l,s));return{c(){t=y("div");for(let s=0;s<n.length;s+=1)n[s].c();v(t,"class","array-values svelte-21s1gx")},m(s,a){P(s,t,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(t,null)},p(s,a){if(a&34){l=x(s[20].arrayValues);let i;for(i=0;i<l.length;i+=1){const o=De(s,l,i);n[i]?n[i].p(o,a):(n[i]=Xe(o),n[i].c(),n[i].m(t,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&C(t),Me(n,s)}}}function Xe(e){let t,l,n=e[23]+"",s,a,i,o,r,u;function b(){return e[15](e[20],e[25])}return{c(){t=y("div"),l=y("span"),s=E(n),a=O(),i=y("span"),i.textContent="Ã—",o=O(),v(l,"class","array-text svelte-21s1gx"),v(i,"class","delete-icon svelte-21s1gx"),v(t,"class","array-item svelte-21s1gx"),v(t,"title","Click to remove")},m(h,m){P(h,t,m),c(t,l),c(l,s),c(t,a),c(t,i),c(t,o),r||(u=F(t,"click",b),r=!0)},p(h,m){e=h,m&2&&n!==(n=e[23]+"")&&L(s,n)},d(h){h&&C(t),r=!1,u()}}}function Ye(e,t){let l,n,s;function a(r,u){var b,h,m,k,_,p;return u&2&&(n=null),n==null&&(n=r[20].handle==="jobRank"&&(!((b=r[9]())!=null&&b.arrayValues)||((m=(h=r[9]())==null?void 0:h.arrayValues)==null?void 0:m.length)===0)||r[20].handle==="gangRank"&&(!((k=r[10]())!=null&&k.arrayValues)||((p=(_=r[10]())==null?void 0:_.arrayValues)==null?void 0:p.length)===0)),n?zt:Jt}let i=a(t,-1),o=i(t);return{key:e,first:null,c(){l=we(),o.c(),s=we(),this.first=l},m(r,u){P(r,l,u),o.m(r,u),P(r,s,u)},p(r,u){t=r,i===(i=a(t,u))&&o?o.p(t,u):(o.d(1),o=i(t),o&&(o.c(),o.m(s.parentNode,s)))},d(r){r&&(C(l),C(s)),o.d(r)}}}function qt(e){let t,l,n,s,a,i=[],o=new Map,r,u,b,h=e[2].Ui.create.reset+"",m,k,_,p=e[2].Ui.create.submit+"",$,g,M,A=x(e[1]);const I=j=>j[20].handle;for(let j=0;j<A.length;j+=1){let w=Ke(e,A,j),f=I(w);o.set(f,i[j]=Ye(f,w))}return{c(){t=y("div"),l=y("div"),n=y("h1"),n.textContent=`${e[3]}`,s=O(),a=y("div");for(let j=0;j<i.length;j+=1)i[j].c();r=O(),u=y("div"),b=y("button"),m=E(h),k=O(),_=y("button"),$=E(p),v(n,"class","svelte-21s1gx"),v(l,"class","header svelte-21s1gx"),v(a,"class","form-content svelte-21s1gx"),v(b,"type","button"),v(b,"class","reset-btn svelte-21s1gx"),b.disabled=e[0],v(_,"type","button"),v(_,"class","submit-btn svelte-21s1gx"),_.disabled=e[0],v(u,"class","button-container svelte-21s1gx"),v(t,"class","container svelte-21s1gx")},m(j,w){P(j,t,w),c(t,l),c(l,n),c(t,s),c(t,a);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(a,null);c(t,r),c(t,u),c(u,b),c(b,m),c(u,k),c(u,_),c(_,$),g||(M=[F(b,"click",e[8]),F(_,"click",e[7])],g=!0)},p(j,[w]){w&1650&&(A=x(j[1]),i=Ut(i,w,I,1,j,A,o,a,$t,Ye,null,Ke)),w&4&&h!==(h=j[2].Ui.create.reset+"")&&L(m,h),w&1&&(b.disabled=j[0]),w&4&&p!==(p=j[2].Ui.create.submit+"")&&L($,p),w&1&&(_.disabled=j[0])},i:J,o:J,d(j){j&&C(t);for(let w=0;w<i.length;w+=1)i[w].d();g=!1,B(M)}}}function Bt(e,t,l){let n,s,a;X(e,re,f=>l(11,n=f)),X(e,je,f=>l(2,s=f)),X(e,it,f=>l(18,a=f));let i=s.Ui.create.header,o=!1,r=[{handle:"name",label:s.Ui.create.name,array:!1,default:"my_stash",value:""},{handle:"job",label:s.Ui.create.job,array:!0,default:!1,value:"",arrayValues:[]},{handle:"jobRank",label:s.Ui.create.jobRank,array:!1,type:"number",default:0,value:""},{handle:"gang",label:s.Ui.create.gang,array:!0,default:!1,value:"",arrayValues:[]},{handle:"gangRank",label:s.Ui.create.gangRank,array:!1,type:"number",default:0,value:""},{handle:"item",label:s.Ui.create.item,array:!0,default:!1,value:"",arrayValues:[]},{handle:"identifier",label:s.Ui.create.identifier,array:!0,default:!1,value:"",arrayValues:[]},{handle:"maxWeight",label:s.Ui.create.weight,array:!1,type:"number",default:a.maxWeight,value:""},{handle:"slots",label:s.Ui.create.slots,array:!1,type:"number",default:a.slots,value:""},{handle:"password",label:s.Ui.create.password,array:!1,default:!1,value:""}];function u(f){f.value&&f.value.trim()!==""&&(f.arrayValues||(f.arrayValues=[]),f.arrayValues.push(f.value.trim()),f.value="",l(1,r=[...r]))}function b(f,d){f.arrayValues&&(f.arrayValues.splice(d,1),l(1,r=[...r]))}function h(f,d){f.key==="Enter"&&u(d)}async function m(){l(0,o=!0);const f={};r.forEach(d=>{d.array?!d.arrayValues||d.arrayValues.length===0?f[d.handle]=!1:f[d.handle]=d.arrayValues:d.type==="number"?f[d.handle]=d.value?Number(d.value):Number(d.default):f[d.handle]=d.value||d.default}),n?(await D("saveEdit",{form:f,id:n}),k(),Y.set(!1),Q.set(!1),re.set(null)):await D("createStash",f),Q.set(!1),l(0,o=!1)}function k(){r.forEach(f=>{f.value="",f.arrayValues=[]}),l(1,r=[...r])}function _(){return r.find(f=>f.handle==="job")}function p(){return r.find(f=>f.handle==="gang")}function $(f){try{const d=typeof f.data=="string"?JSON.parse(f.data):f.data||{},V=typeof f.loc=="string"?JSON.parse(f.loc):f.loc||{};r.forEach(U=>{if(U.handle==="name"){U.value=f.name||U.default;return}if(U.handle==="maxWeight"&&d.weight!==void 0){U.value=d.weight;return}if(U.handle==="slots"&&d.slots!==void 0){U.value=d.slots;return}if(U.handle==="password"){U.value=d.password===!1?"":d.password;return}if(U.array&&d[U.handle]!==void 0){Array.isArray(d[U.handle])?U.arrayValues=[...d[U.handle]]:d[U.handle]===!1&&(U.arrayValues=[]);return}if(!U.array&&d[U.handle]!==void 0){U.value=d[U.handle];return}U.value=U.default,U.array&&(U.arrayValues=[])}),l(1,r=[...r])}catch(d){console.error("Failed to parse editable data:",d)}}function g(f,d){f[d].value=this.value,l(1,r)}const M=(f,d)=>h(d,f),A=f=>u(f),I=(f,d)=>b(f,d);function j(f,d){f[d].value=tt(this.value),l(1,r)}function w(f,d){f[d].value=this.value,l(1,r)}return e.$$.update=()=>{e.$$.dirty&2048&&n&&$(n)},[o,r,s,i,u,b,h,m,k,_,p,n,g,M,A,I,j,w]}class Gt extends ve{constructor(t){super(),be(this,t,Bt,qt,oe,{})}}const Kt=()=>!window.invokeNative,Dt=(e,t=1e3)=>{if(Kt())for(const l of e)setTimeout(()=>{window.dispatchEvent(new MessageEvent("message",{data:{action:l.action,data:l.data}}))},t)};function Qt(e){let t,l;return t=new Gt({}),{c(){Ue(t.$$.fragment)},m(n,s){he(t,n,s),l=!0},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){pe(t,n)}}}function Xt(e){let t,l,n;return l=new Ft({props:{$$slots:{default:[Qt]},$$scope:{ctx:e}}}),{c(){t=y("main"),Ue(l.$$.fragment)},m(s,a){P(s,t,a),he(l,t,null),n=!0},p(s,[a]){const i={};a&1&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){n||(H(l.$$.fragment,s),n=!0)},o(s){q(l.$$.fragment,s),n=!1},d(s){s&&C(t),pe(l)}}}function Yt(e){return Dt([{action:"setVisible",data:!0}]),[]}class Zt extends ve{constructor(t){super(),be(this,t,Yt,Xt,oe,{})}}new Zt({target:document.getElementById("app")});
